<!DOCTYPE html> <html> <head> <title>Protocol Buffers varint vs fixed – Clément Jean – Eternal learner and challenges lover</title> <meta charset="utf-8" /> <meta content='text/html; charset=utf-8' http-equiv='Content-Type'> <meta http-equiv='X-UA-Compatible' content='IE=edge'> <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'> <meta name="description" content=" This article is much more a note to myself than something else but this might be interesting for people out there. I wanted to calculate the thresholds at which it is better it is to use a fixed rather than a varint. " /> <meta property="og:description" content=" This article is much more a note to myself than something else but this might be interesting for people out there. I wanted to calculate the thresholds at which it is better it is to use a fixed rather than a varint. " /> <meta name="author" content="Clément Jean" /> <meta property="og:title" content="Protocol Buffers varint vs fixed" /> <meta property="twitter:title" content="Protocol Buffers varint vs fixed" /> <link href="https://techhub.social/@clementjean" rel="me"> <link rel="stylesheet" type="text/css" href="/style.css" /> <link rel="alternate" type="application/rss+xml" title="Clément Jean - Eternal learner and challenges lover" href="/feed.xml" /> <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/Clement-Jean/clement-jean.github.io/master/images/%E4%B8%80%E4%BB%8B%E5%A5%BD%E5%AD%A6.png"> </head> <body> <div class="wrapper-masthead"> <div class="container"> <header class="masthead clearfix"> <a href="/" class="site-avatar"><img src="https://raw.githubusercontent.com/Clement-Jean/clement-jean.github.io/master/images/%E4%B8%80%E4%BB%8B%E5%A5%BD%E5%AD%A6.png" /></a> <div class="site-info"> <h1 class="site-name"><a class="black-red-link" href="/">Clément Jean</a></h1> <p class="site-description">Eternal learner and challenges lover</p> </div> <nav> <a class="black-red-link" href="/">Home</a> <a class="black-red-link" href="/categories">Categories</a> <a class="black-red-link" href="/about">About</a> </nav> </header> </div> </div> <div id="main" role="main" class="container"> <article class="post"> <h1>Protocol Buffers varint vs fixed</h1> <div class="entry"> <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Mono"/><link rel="stylesheet" href="/assets/codeblock.css"/><script src="/assets/codeblock.js"></script> <p>This article is much more a note to myself than something else but this might be interesting for people out there.</p> <p>I wanted to calculate the thresholds at which it is better it is to use a <code>fixed</code> rather than a varint. <!--desc--> Now, knowing that the varint are encoded in base 128, this basically means that we are dealing with power of 128. This gives us the following table:</p> <div class="table-responsive"> <table class="table table-striped table-borderless"> <thead> <tr> <th scope="col" class="text-center">Threshold value</th> <th scope="col" class="text-center">Bytes size (without tag)</th> </tr> </thead> <tbody> <tr> <th scope="row" class="text-center">0</th> <td class="text-center">0</td> </tr> <tr> <th scope="row" class="text-center">1</th> <td class="text-center">1</td> </tr> <tr> <th scope="row" class="text-center">128</th> <td class="text-center">2</td> </tr> <tr> <th scope="row" class="text-center">16,384</th> <td class="text-center">3</td> </tr> <tr> <th scope="row" class="text-center">2,097,152</th> <td class="text-center">4</td> </tr> <tr> <th scope="row" class="text-center">268,435,456</th> <td class="text-center">5</td> </tr> <tr> <th scope="row" class="text-center">34,359,738,368</th> <td class="text-center">6</td> </tr> <tr> <th scope="row" class="text-center">4,398,046,511,104</th> <td class="text-center">7</td> </tr> <tr> <th scope="row" class="text-center">562,949,953,421,312</th> <td class="text-center">8</td> </tr> <tr> <th scope="row" class="text-center">72,057,594,037,927,936</th> <td class="text-center">9</td> </tr> </tbody> </table> </div> <p>In summary:</p> <ul> <li>From 268,435,456 to whatever limit you 32 bits type has, it is better to use a <code>fixed32</code>.</li> <li>From 72,057,594,037,927,936 to whatever limit you 64 bits type has, it is better to use a <code>fixed64</code>.</li> </ul> </div> <div class="date"> Written on October 2, 2022 </div> <div class="comments"> <div id="disqus_thread"></div> <script type="text/javascript"> var disqus_shortname = 'clement-jean-github-io-1'; (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); </script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> </div> </article> </div> <div class="wrapper-footer"> <div class="container"> <footer class="footer"> <a href="mailto:clement.jean@epitech.eu"><i class="svg-icon email"></i></a> <a href="https://github.com/Clement-Jean"><i class="svg-icon github"></i></a> <a href="https://www.linkedin.com/in/clement-jean"><i class="svg-icon linkedin"></i></a> <a href="/feed.xml"><i class="svg-icon rss"></i></a> <a href="https://www.twitter.com/ClmentJean1"><i class="svg-icon twitter"></i></a> <a href="http://stackoverflow.com/users/11269045/clément-jean"><i class="svg-icon stackoverflow"></i></a> <a href="https://techhub.social/@clementjean"><i class="svg-icon mastodon"></i></a> </footer> </div> </div> <!-- Google Analytics --> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-111260962-1', 'auto'); ga('send', 'pageview', { 'page': '/protobuf-varint-vs-fixed/', 'title': 'Protocol Buffers varint vs fixed' }); </script> <!-- End Google Analytics --> </body> </html>
